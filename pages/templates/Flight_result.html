{% load static %}

  <link rel='stylesheet' href='https://cdnjs.cloudflare.com/ajax/libs/ionicons/2.0.1/css/ionicons.css'><link rel="stylesheet" href="{% static 'css/style_r.css' %}">

</head>
<body>
<!-- partial:index.partial.html -->
{% if flights %}
{% for flight in flights %}
<section class="itinerary" style="margin-top: 10%;margin-left: 5%;">

  <div class="itinerary__section">
    
<!--     
trips section:
trips can be stacked, and the "flight path" (dotted line + circled plane) will automatically appear.
-->
    <div class="itinerary@trip">
      <div class="itinerary@trip__meta">
        <h4 class="itinerary@trip__title">{{flight.depart}} <i class="ion-android-arrow-forward"></i>{{flight.ps1}}</h4> <span class="itinerary@status itinerary@status--warning">Layover</span> <i class="ion-android-arrow-forward"></i>
        <h4 class="itinerary@trip__title">{{flight.ps2}}</h4>
      </div>
      <time class="itinerary@trip__time" datatime="">Depart</time>
      <time class="itinerary@trip__date" datatime="">{{flight.hour_d}}</time>
    </div>

    <div class="itinerary@trip itinerary@trip--layover">
      <div class="itinerary@trip__meta">
        <h4 class="itinerary@trip__title">{{flight.destination}}</h4>
      </div>
      <time class="itinerary@trip__time" datatime="" aria-hidden="true">Arrive</time>
      <time class="itinerary@trip__date" datatime="">{{flight.hour_a}}</time>
    </div>

  </div>

  <div class="itinerary__section itinerary@checkout">
    <h1 class="itinerary@checkout__company" style="text-align: center;">{{flight.classe}}
    <div class="itinerary@checkout__total"><span class="itinerary@checkout__offer"><strong>PRICE</strong></span>
      <h1 class="itinerary@checkout__points">{{flight.price}}</h1>
      <h1 class="itinerary@checkout__cost">$</h1>
    </div>
    <a href="#" class="book-flight" data-flight="{{ flight.id }}">
    <button class="btn btn--primary"><i class="ion-ios-cart-outline"></i> Book Now</button>
    </a>
        <div class="itinerary@menu">
      <div class="itinerary@menu__item seat"></div>
      <div class="itinerary@menu__item"><i class="ion-ios-briefcase"></i></div>
      <div class="itinerary@menu__item"><i class="ion-information-circled"></i></div>
    </div>
  </div>
</section>
{% endfor %}
{% else %}<p>no flights</p>
{% endif%}
<!-- partial -->
<script>
  // Add click event listener to all elements with the "delete-link" class
  document.querySelectorAll('.book-flight').forEach(function(link) {
link.addEventListener('click', function (event) {
event.preventDefault(); // Prevent the default behavior of the anchor tag

var flight = link.getAttribute('data-flight');

// Show SweetAlert confirmation
Swal.fire({
title: 'Are you sure?',
text: 'You won\'t be able to revert this!',
icon: 'warning',
showCancelButton: true,
confirmButtonColor: '#4BB5C1',
cancelButtonColor: '#d33',
confirmButtonText: 'Yes, Book flight!'
}).then((result) => {
if (result.isConfirmed) {
window.location.href = '/checkout_flight/' + flight; // Adjust the URL as needed
}
});
});
});
</script>

<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11.10.3/dist/sweetalert2.all.min.js"></script>

  <script  src="{% static 'js/script_r.js' %}"></script>

</body>
</html>
